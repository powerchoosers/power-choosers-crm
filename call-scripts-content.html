<div class="calls-hub-layout">
    <!-- Main Script Area -->
    <div class="calls-hub-main">
        <h2 class="text-2xl font-bold mb-6 text-white text-center">Cold Calling Script</h2>
        
        <div class="calls-hub-main-inner">
            <div class="script-display p-6" id="script-display">
                Click 'Dial' to begin the call
            </div>

            <div class="response-buttons mt-6" id="responses-container">
                <button id="dialButton" class="dial-button" data-action="handleDialClick">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                    Dial
                </button>
            </div>

            <div class="calls-hub-footer">
                <button id="backButton" class="action-btn" disabled>‚Üê Back</button>
                <button id="restartButton" class="restart-btn-icon" aria-label="Restart call">
                    <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path d="M21.5 13a9.5 9.5 0 1 1-9.5-9.5V3a.5.5 0 0 0-1 0v.5A9.5 9.5 0 1 1 21.5 13zM12 2v4M12 18v4M22 12h-4M6 12H2M18 18l-3-3M18 6l-3 3M6 18l3-3M6 6l3 3" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Right Hand Side Scrolling Sidebar -->
    <div class="calls-hub-sidebar">
        
        <!-- Prospect Information Widget -->
        <div class="sidebar-card">
            <h3 class="sidebar-card-title">üìã Prospect Info</h3>
            <div class="sidebar-input-group">
                <label for="input-phone">Phone Number:</label>
                <input type="text" id="input-phone" placeholder="(555) 555-5555" data-update-script="true">
            </div>
            <div class="sidebar-input-group">
                <label for="input-company-name">Company Name:</label>
                <input type="text" id="input-company-name" placeholder="ABC Manufacturing" data-update-script="true">
            </div>
            <div class="sidebar-input-group">
                <label for="input-name">Contact Name:</label>
                <input type="text" id="input-name" placeholder="John Smith" data-update-script="true">
            </div>
            <div class="sidebar-input-group">
                <label for="input-title">Contact Title:</label>
                <input type="text" id="input-title" placeholder="Company Leader" data-update-script="true">
            </div>
            <div class="sidebar-input-group">
                <label for="input-company-industry">Company Industry:</label>
                <input type="text" id="input-company-industry" placeholder="businesses" oninput="updateScript()">
            </div>
            <div class="sidebar-input-group">
                <label for="input-benefit">Specific Benefit:</label>
                <input type="text" id="input-benefit" placeholder="a strategic procurement strategy" oninput="updateScript()">
            </div>
            <div class="sidebar-input-group">
                <label for="input-pain">Pain Point:</label>
                <input type="text" id="input-pain" placeholder="you're not stuck paying more" oninput="updateScript()">
            </div>
        </div>

        <!-- Energy Health Check Widget -->
        <div class="sidebar-card !p-4" style="height: max-content;">
            <h3 class="sidebar-card-title">üìâ Energy Health Check</h3>
            <div class="calculator-wrapper !p-6" id="calculator-wrapper">
                <div class="form-sections">
                    <div class="form-section active" id="section1">
                        <div class="section-header">
                            <span class="section-header-pill">
                                <span class="section-icon">1</span> Current Bill
                            </span>
                        </div>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="input-group">
                                <label for="currentSupplier" class="input-label text-xs">Current Supplier</label>
                                <input type="text" class="form-input !p-2 !text-sm" id="currentSupplier" placeholder="e.g., TXU" list="supplierList" oninput="validateSection1()">
                                <datalist id="supplierList"></datalist>
                            </div>
                            <div class="input-group">
                                <label for="monthlyBill" class="input-label text-xs">Monthly Bill ($)</label>
                                <input type="number" class="form-input !p-2 !text-sm" id="monthlyBill" placeholder="e.g., 1,450.00" step="0.01" oninput="validateSection1()">
                            </div>
                            <div class="input-group">
                                <label for="currentRate" class="input-label text-xs">Current Rate ($/kWh)</label>
                                <input type="number" class="form-input !p-2 !text-sm" id="currentRate" placeholder="e.g., 0.062" step="0.001" oninput="validateSection1()">
                                <div id="rateFeedback" class="input-feedback text-xs"></div>
                            </div>
                        </div>
                        <div id="usageDisplay" class="usage-display !p-3 mt-3 hidden">
                            <div class="usage-title text-sm">üìä Client's Usage Analysis</div>
                            <div class="usage-details text-xs" id="usageDetails"></div>
                        </div>
                    </div>
                    <div class="mt-6"></div> <!-- Padding between steps -->
                    <div class="form-section" id="section2">
                        <div class="section-header">
                            <span class="section-header-pill">
                                <span class="section-icon">2</span> Contract & Sell Rate
                            </span>
                        </div>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="input-group">
                                <label for="contractEndDate" class="input-label text-xs">Contract End Date</label>
                                <input type="text" class="form-input !p-2 !text-sm" id="contractEndDate" placeholder="YYYY-MM-DD" onfocus="openDatePicker()">
                            </div>
                            <div class="input-group">
                                <label for="sellRate" class="input-label text-xs">Sell Rate ($/kWh)</label>
                                <input type="number" class="form-input !p-2 !text-sm" id="sellRate" placeholder="e.g., 0.088" step="0.001" oninput="validateSection2()">
                            </div>
                        </div>
                    </div>
                    <div class="mt-6"></div> <!-- Padding between steps -->
                    <div class="form-section" id="section3">
                        <div class="section-header">
                            <span class="section-header-pill">
                                <span class="section-icon">3</span> Get Results
                            </span>
                        </div>
                        <p class="text-sm text-gray-400 text-center">Ready to see the analysis!</p>
                    </div>
                </div>
                <button class="calculate-button w-full !p-3 !text-sm !font-bold mt-4" id="calculateBtn" onclick="runCalculation()">
                    Complete All Sections Above
                </button>
                <button class="w-full px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors mt-2 text-sm" id="resetBtn" onclick="resetForm()">
                  Reset Form
                </button>
                <div id="loadingAnimation" class="loading-animation">
                    <div class="spinner"></div>
                    <div class="text-gray-400 mt-4 text-sm" id="loadingMessage">Running analysis...</div>
                </div>
            </div>
        </div>
        
        <!-- Call Notes Widget -->
        <div class="sidebar-card">
            <h3 class="sidebar-card-title">üìù Call Notes</h3>
            <div class="sidebar-input-group">
                <textarea id="call-notes" placeholder="Type your call notes here..."></textarea>
            </div>
            <div class="sidebar-actions">
                <button class="add-notes-btn" onclick="saveProspectAndNotes()">Save Notes</button>
                <button class="clear-btn" onclick="clearNotes()">Clear</button>
            </div>
        </div>

        <!-- Call Strategy Tips Widget -->
        <div class="sidebar-card">
            <h3 class="sidebar-card-title">üí° Call Strategy Tips</h3>
            <ul class="text-sm text-gray-300 space-y-3">
                <li class="list-item">
                    <strong class="text-white">Mirror their energy:</strong> Match their speaking pace and enthusiasm.
                </li>
                <li class="list-item">
                    <strong class="text-white">Use their name:</strong> Say their name 2-3 times during the call to maintain a personal connection.
                </li>
                <li class="list-item">
                    <strong class="text-white">Pause power:</strong> Use 2-3 second pauses after questions to let them process and respond.
                </li>
                <li class="list-item">
                    <strong class="text-white">Assume the close:</strong> When scheduling, offer two specific times rather than an open-ended "when works?".
                </li>
            </ul>
        </div>
        
        <!-- Objection Responses Widget -->
        <div class="sidebar-card">
            <h3 class="sidebar-card-title">üõ°Ô∏è Quick Objection Responses</h3>
            <div class="text-sm space-y-4">
                <div class="p-3 bg-gray-900 rounded-lg border border-gray-700">
                    <p class="font-semibold text-white">"We're happy with our provider."</p>
                    <p class="text-gray-400 mt-1">"That's great to hear. This isn't about changing providers; it's about optimizing your position within the current market structure."</p>
                </div>
                <div class="p-3 bg-gray-900 rounded-lg border border-gray-700">
                    <p class="font-semibold text-white">"We just renewed our contract."</p>
                    <p class="text-gray-400 mt-1">"Perfect timing, actually. This gives us a chance to prepare strategically for your next cycle rather than scrambling later."</p>
                </div>
                <div class="p-3 bg-gray-900 rounded-lg border border-gray-700">
                    <p class="font-semibold text-white">"Send me some information."</p>
                    <p class="text-gray-400 mt-1">"I can definitely do that. What specific information would be most valuable to you - a rate comparison or market timing strategies?"</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Energy Health Check Calendar -->
<div id="taskModal" class="modal" data-close-modal="true">
  <div class="modal-content">
    <div class="modal-card-container">
      <div class="modal-card" id="dateCard">
        <h3 class="text-lg font-semibold text-white mb-4">Select Contract End Date</h3>
        <div class="calendar-header">
            <button id="prevMonthBtn" class="text-gray-400 hover:text-white transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M15 19l-7-7 7-7"/></svg>
            </button>
            <div class="flex-grow flex justify-center items-center">
                <div id="monthYearDisplay">
                    <span id="monthYearSpan" class="text-white font-semibold cursor-pointer"></span>
                </div>
                <div id="monthYearPicker" class="flex justify-center items-center hidden">
                    <select id="monthSelector" class="form-input w-2/5 mr-2"></select>
                    <select id="yearSelector" class="form-input w-2/5 ml-2"></select>
                </div>
            </div>
            <button id="nextMonthBtn" class="text-gray-400 hover:text-white transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M9 5l7 7-7 7"/></svg>
            </button>
        </div>
        <div class="calendar-grid" id="calendarGrid"></div>
        <button id="cancelBtn" class="mt-6 w-full px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors">Cancel</button>
      </div>
    </div>
  </div>
</div>

<script src="call-scripts-content.js"></script>
        datalist.appendChild(option);
    });
}
</script>